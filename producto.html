<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Detalle Producto</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .detalle { max-width:900px; margin:30px auto; background:#fff; padding:20px; border-radius:12px; }
    .detalle img { width:100%; max-height:420px; object-fit:cover; border-radius:10px; }
    .detalle h2 { color:#0b3b60; }
  </style>
</head>
<body>
  <header><h1>Detalle del producto</h1></header>
  <main class="detalle" id="detalle"></main>
  <script>
    const p = JSON.parse(localStorage.getItem('productoSeleccionado'));
    const cont = document.getElementById('detalle');
    if (!p) cont.innerHTML = '<p>Producto no encontrado. <a href="index.html">Volver</a></p>';
    else {
      cont.innerHTML = `
        <img src="${p.imagen}" alt="${p.nombre}">
        <h2>${p.nombre}</h2>
        <p>${p.descripcion}</p>
        <p style="font-weight:800">${p.precio.toFixed(2)} €</p>
        <div style="display:flex;gap:10px;margin-top:12px">
          <button onclick="anadir()" class="btn btn-carrito">Añadir al carrito</button>
          <button onclick="comprarAhora()" class="btn btn-comprar">Comprar ahora</button>
        </div>
      `;
    }
    function anadir(){
      let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      const existe = carrito.find(x=>x.id===p.id);
      if (existe) existe.cantidad++;
      else carrito.push({...p, cantidad:1});
      localStorage.setItem('carrito', JSON.stringify(carrito));
      alert('Añadido al carrito ✅');
    }
    function comprarAhora(){
      localStorage.setItem('carrito', JSON.stringify([{...p, cantidad:1}]));
      window.location.href = 'comprar.html';
    }
  </script>
</body>
</html>
