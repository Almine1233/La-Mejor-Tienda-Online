<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mi cuenta</title>
<link rel="stylesheet" href="style.css">
</head>
<body onload="protect()">

<h2>Mi cuenta</h2>

<button onclick="logout()">Cerrar sesión</button>

<h3>Historial de compras</h3>
<div id="historial"></div>

<script src="auth.js"></script>
<script>
const historial = JSON.parse(localStorage.getItem("historial")) || [];
const cont = document.getElementById("historial");

if (historial.length === 0) {
  cont.innerHTML = "<p>No hay compras aún</p>";
}

historial.forEach(h => {
  cont.innerHTML += `
    <div class="producto">
      <p><strong>${h.fecha}</strong></p>
      ${h.productos.map(p => `<p>${p.nombre} - ${p.precio}€</p>`).join("")}
    </div>
  `;
});
</script>

</body>
</html>
